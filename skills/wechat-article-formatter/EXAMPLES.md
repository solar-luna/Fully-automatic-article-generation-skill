# 使用示例

本文档提供完整的使用示例，展示如何使用 `wechat-article-formatter` skill 将Markdown文章转换为适合微信公众号的美化HTML。

## ✨ v2.0 新功能示例

### 1. 警告框（4种类型）

**Markdown 语法**：
```markdown
> **💡 提示**: 这是信息提示框，蓝紫色渐变背景

> **⚠️ 警告**: 这是警告提示框，琥珀色渐变背景

> **✅ 成功**: 这是成功提示框，翡翠绿渐变背景

> **❌ 危险**: 这是危险提示框，玫瑰红渐变背景
```

**效果**：
- Info（信息）：蓝紫色边框 + 渐变背景（#eef2ff → #f5f3ff）
- Warning（警告）：琥珀色边框 + 渐变背景（#fffbeb → #fef3c7）
- Success（成功）：翡翠绿边框 + 渐变背景（#ecfdf5 → #d1fae5）
- Danger（危险）：玫瑰红边框 + 渐变背景（#fef2f2 → #fee2e2）

**支持的关键词**：
- Info: 💡, 提示, Info, TIP, NOTE
- Warning: ⚠️, 警告, Warning, WARN, CAUTION
- Success: ✅, 成功, Success, DONE
- Danger: ❌, 危险, Danger, ERROR, CRITICAL

### 2. 表格增强

**Markdown 语法**（标准表格，无需修改）：
```markdown
| 功能 | 状态 | 备注 |
|------|------|------|
| 警告框 | ✅ 完成 | 4种类型 |
| 表格渐变 | ✅ 完成 | 紫蓝渐变 |
```

**效果**：
- 表头：紫蓝渐变（#7c3aed → #6366f1）
- 表格行：自动条纹效果（偶数行灰色背景）
- 阴影：淡紫色阴影增强立体感

### 3. 列表美化

**Markdown 语法**（标准无序列表）：
```markdown
- 第一项
- 第二项
- 第三项
```

**效果**：
- 自动替换为紫色圆点（●）
- 圆点颜色：#7c3aed（品牌主题色）
- 使用 position: absolute 定位

### 4. 代码块语法高亮

**Markdown 语法**：
````markdown
```python
def calculate_sum(a, b):
    """计算两数之和"""
    return a + b
```
````

**效果**：
- Atom One Dark 深色主题（#282c34背景）
- 11色语法高亮（关键字紫色、字符串绿色、函数蓝色等）
- 阴影效果增强视觉层次

### 5. H2标题渐变下划线

**Markdown 语法**（标准H2标题）：
```markdown
## 这是H2标题
```

**效果**：
- 标题下方自动添加紫色渐变下划线
- 渐变效果：#7c3aed → #a78bfa → transparent
- 宽度：100px

### 6. 分隔线渐变

**Markdown 语法**：
```markdown
---
```

**效果**：
- 居中显示（宽度60%）
- 紫色渐变：transparent → #7c3aed → transparent
- 透明度：0.6

---

## 示例1：单篇技术文章转换（完整示例）

### 场景描述
你已经用 `wechat-tech-writer` skill 写好了一篇关于Claude Sonnet 4的技术文章，现在需要将其转换为美观的HTML格式，以便粘贴到微信公众号编辑器。

### 输入文件
**文件路径**: `/home/user/articles/Claude_Sonnet_4介绍.md`

**文件内容节选**:
```markdown
# Claude Sonnet 4：AI推理能力的新巅峰

![封面图](cover.png)

## 什么是Claude Sonnet 4？

Claude Sonnet 4是Anthropic公司于2024年10月发布的最新大语言模型...

## 核心功能特性

### 1. 强大的推理能力

Claude Sonnet 4在复杂推理任务上表现出色，在多个基准测试中超越了GPT-4...

```python
# 示例代码
import anthropic

client = anthropic.Anthropic(api_key="your-api-key")
response = client.messages.create(
    model="claude-sonnet-4-20241022",
    max_tokens=1024,
    messages=[{"role": "user", "content": "解释量子计算原理"}]
)
```

### 2. 多模态理解

支持图片、文档等多种输入格式...

> **提示**: Claude Sonnet 4在代码生成和调试任务上表现尤为出色。

## 性能对比

| 模型 | MMLU | HumanEval | MATH |
|------|------|-----------|------|
| Claude Sonnet 4 | 88.7% | 92.0% | 71.1% |
| GPT-4 Turbo | 86.4% | 90.2% | 68.3% |

## 总结

Claude Sonnet 4代表了AI推理能力的新高度...
```

### 执行步骤

#### 步骤1：使用命令行转换

```bash
# 进入技能目录
cd /root/.claude/skills/wechat-article-formatter

# 转换文章（使用科技风主题）
python scripts/markdown_to_html.py \
  --input /home/user/articles/Claude_Sonnet_4介绍.md \
  --theme tech \
  --output /home/user/articles/Claude_Sonnet_4介绍.html \
  --preview
```

**命令参数说明**:
- `--input`: 输入的Markdown文件路径
- `--theme tech`: 使用科技风主题（蓝紫渐变，适合技术文章）
- `--output`: 输出的HTML文件路径
- `--preview`: 转换完成后自动在浏览器打开预览

#### 步骤2：查看输出结果

**控制台输出**:
```
✅ 转换成功！
📄 输入文件: /home/user/articles/Claude_Sonnet_4介绍.md
📄 输出文件: /home/user/articles/Claude_Sonnet_4介绍.html
🎨 使用主题: tech
🌐 已在浏览器中打开预览

💡 提示：
   1. 在浏览器中打开HTML文件预览效果
   2. 使用浏览器的"审查元素"工具查看样式
   3. 复制HTML内容粘贴到微信公众号编辑器
   4. 在微信编辑器中可能需要微调图片和代码块
```

#### 步骤3：在浏览器中预览

浏览器会自动打开生成的HTML文件，你会看到：

**视觉效果**:
- ✅ H1标题带有紫蓝渐变左侧边框
- ✅ H2标题带有渐变下划线
- ✅ H3标题带有紫色左侧边框
- ✅ 代码块使用Atom One Dark配色方案，深色背景
- ✅ 表格表头使用紫蓝渐变背景
- ✅ 引用块带有紫色左侧边框和浅紫色背景
- ✅ 图片居中显示，带有阴影效果

#### 步骤4：复制到微信公众号编辑器

1. 在浏览器中按 `Ctrl+A` 选中全部内容
2. 按 `Ctrl+C` 复制
3. 打开微信公众号后台编辑器
4. 在编辑器中按 `Ctrl+V` 粘贴
5. 检查格式，微调图片位置（如需要）
6. 保存并预览

### 预期结果

**HTML文件大小**: ~50KB（包含内联CSS）

**样式特点**:
- 科技感强烈的蓝紫渐变配色
- 代码块专业的深色主题
- 表格和引用块视觉层次清晰
- 移动端自适应，阅读体验良好

### 关键学习点

1. **主题选择**: 技术文章使用 `tech` 主题效果最佳
2. **预览功能**: 使用 `--preview` 参数可以立即查看效果，无需手动打开文件
3. **内联样式**: 生成的HTML包含所有内联样式，可以直接粘贴到微信编辑器
4. **代码高亮**: 代码块自动应用语法高亮，保持专业外观

---

## 示例2：批量转换多篇文章（简约风主题）

### 场景描述
你有一个文章目录，包含10篇不同主题的文章，需要批量转换为HTML格式。这次使用简约风主题，适合更广泛的内容类型。

### 输入文件结构
```
/home/user/blog/
├── AI工具推荐.md
├── Python入门教程.md
├── 数据分析实战.md
├── 机器学习基础.md
├── Web开发技巧.md
├── Git使用指南.md
├── Docker容器化部署.md
├── 微服务架构解析.md
├── 前端性能优化.md
└── 数据库设计原则.md
```

### 执行步骤

#### 步骤1：批量转换

```bash
# 批量转换目录下的所有Markdown文件
python scripts/batch_convert.py \
  --input /home/user/blog/ \
  --output /home/user/blog/html_output/ \
  --theme minimal \
  --workers 8
```

**命令参数说明**:
- `--input`: 输入目录（包含多个Markdown文件）
- `--output`: 统一输出目录
- `--theme minimal`: 使用简约风主题（黑白灰，极简设计）
- `--workers 8`: 使用8个并发线程加速转换

#### 步骤2：查看转换进度

**控制台输出**:
```
📚 找到 10 个Markdown文件
🎨 使用主题: minimal
⚙️  并发数: 8

📁 输出目录: /home/user/blog/html_output/

🚀 开始转换...
────────────────────────────────────────────────────────────
✅ [1/10] AI工具推荐.md → AI工具推荐.html (0.34s)
✅ [2/10] Python入门教程.md → Python入门教程.html (0.42s)
✅ [3/10] 数据分析实战.md → 数据分析实战.html (0.38s)
✅ [4/10] 机器学习基础.md → 机器学习基础.html (0.45s)
✅ [5/10] Web开发技巧.md → Web开发技巧.html (0.31s)
✅ [6/10] Git使用指南.md → Git使用指南.html (0.29s)
✅ [7/10] Docker容器化部署.md → Docker容器化部署.html (0.36s)
✅ [8/10] 微服务架构解析.md → 微服务架构解析.html (0.41s)
✅ [9/10] 前端性能优化.md → 前端性能优化.html (0.33s)
✅ [10/10] 数据库设计原则.md → 数据库设计原则.html (0.37s)
────────────────────────────────────────────────────────────

📊 转换摘要
────────────────────────────────────────────────────────────
总文件数: 10
✅ 成功: 10
❌ 失败: 0
────────────────────────────────────────────────────────────
✨ 成功率: 100.0%
```

#### 步骤3：验证输出文件

```bash
# 查看输出目录
ls -lh /home/user/blog/html_output/

# 输出结果
AI工具推荐.html          45K
Python入门教程.html      52K
数据分析实战.html        48K
机器学习基础.html        51K
Web开发技巧.html         43K
Git使用指南.html         39K
Docker容器化部署.html    47K
微服务架构解析.html      54K
前端性能优化.html        42K
数据库设计原则.html      46K
```

### 预期结果

**转换速度**: 使用8个并发线程，10篇文章共耗时约3.7秒（平均0.37秒/篇）

**样式特点**（简约风主题）:
- 极简的黑白灰配色
- H1标题居中显示
- H2标题带有淡灰色下划线
- 代码块使用浅灰色背景
- 表格使用GitHub风格
- 整体设计简洁大方，适合各类内容

### 关键学习点

1. **批量处理**: 使用 `batch_convert.py` 可以一次性转换整个目录
2. **并发加速**: `--workers` 参数控制并发线程数，提高处理速度
3. **统一输出**: `--output` 参数将所有HTML文件输出到同一目录，方便管理
4. **主题一致性**: 批量转换时使用同一主题，保持文章风格统一

---

## 示例3：实时预览编辑（商务风主题）

### 场景描述
你正在撰写一篇商业分析报告，需要边写边预览效果，确保格式符合预期。这次使用商务风主题，适合专业报告和企业内容。

### 输入文件
**文件路径**: `/home/user/reports/2024_Q4_业绩分析.md`

**初始内容**:
```markdown
# 2024年Q4业绩分析报告

## 执行摘要

本季度公司营收达到1.2亿元，同比增长35%...

## 关键指标

| 指标 | Q4 2024 | Q3 2024 | 同比增长 |
|------|---------|---------|----------|
| 营收 | 1.2亿 | 0.9亿 | 35% |
| 利润 | 2400万 | 1800万 | 33% |

## 市场分析

...
```

### 执行步骤

#### 步骤1：启动实时预览服务

```bash
# 启动实时预览
python scripts/preview_generator.py \
  --input /home/user/reports/2024_Q4_业绩分析.md \
  --theme business \
  --port 8080
```

**控制台输出**:
```
🚀 启动实时预览服务...
📄 监听文件: /home/user/reports/2024_Q4_业绩分析.md
📁 输出目录: /home/user/preview
🎨 使用主题: business

🌐 本地服务器已启动: http://localhost:8080
🌐 已在浏览器中打开预览: http://localhost:8080/2024_Q4_业绩分析.html

👀 正在监听文件变化...
💡 提示：修改Markdown文件后，刷新浏览器即可看到最新效果
⏹️  按Ctrl+C停止服务
```

#### 步骤2：在编辑器中修改Markdown文件

在你的Markdown编辑器（如VS Code）中继续编辑文件：

```markdown
# 2024年Q4业绩分析报告

## 执行摘要

本季度公司营收达到1.2亿元，同比增长35%。核心业务表现强劲，新产品线贡献显著。

## 关键指标

| 指标 | Q4 2024 | Q3 2024 | 同比增长 |
|------|---------|---------|----------|
| 营收 | 1.2亿 | 0.9亿 | 35% |
| 利润 | 2400万 | 1800万 | 33% |
| 客户数 | 5000+ | 3800+ | 32% |

## 市场分析

### 行业趋势

当前市场呈现以下特点：

1. **数字化转型加速** - 企业对AI工具的需求持续增长
2. **市场竞争加剧** - 新进入者增多，需要差异化策略
3. **客户需求多样化** - 定制化服务成为竞争优势

> **重要提示**: 下季度需要重点关注客户留存率和复购率。

## 未来展望

基于当前趋势，预计Q1 2025营收将达到1.5亿元...
```

#### 步骤3：保存并查看实时更新

保存Markdown文件后，控制台显示：

```
[14:35:22] ✅ 已更新预览: 2024_Q4_业绩分析.html
```

在浏览器中按 `F5` 刷新，立即看到更新后的效果。

#### 步骤4：继续编辑直到满意

重复"编辑 → 保存 → 刷新浏览器"的流程，直到文章格式完全符合预期。

#### 步骤5：停止预览服务

编辑完成后，在控制台按 `Ctrl+C` 停止服务：

```
^C
👋 预览服务已停止
```

生成的HTML文件保存在 `/home/user/preview/2024_Q4_业绩分析.html`，可以直接使用。

### 预期结果

**样式特点**（商务风主题）:
- 专业的深蓝 + 金色配色
- H1标题带有金色下划线
- H2标题带有金色左侧边框
- 表格表头使用深蓝渐变背景
- 引用块使用淡蓝色背景
- 整体风格稳重大气，适合商务报告

**编辑体验**:
- 实时监听文件变化，无需手动转换
- 刷新浏览器即可查看最新效果
- 本地HTTP服务器，预览效果接近真实环境
- 边写边看，提高编辑效率

### 关键学习点

1. **实时预览**: `preview_generator.py` 提供了边写边看的编辑体验
2. **文件监听**: 保存Markdown文件后自动重新转换，无需手动操作
3. **本地服务器**: HTTP服务器提供更真实的预览环境
4. **主题选择**: 商务风主题适合报告、分析等专业内容
5. **高效工作流**: 实时预览大幅提高文章格式调整的效率

---

## 三个示例对比总结

| 特性 | 示例1：单篇转换 | 示例2：批量转换 | 示例3：实时预览 |
|------|----------------|----------------|----------------|
| **场景** | 转换已完成的单篇文章 | 批量处理多篇文章 | 边写边预览 |
| **使用脚本** | `markdown_to_html.py` | `batch_convert.py` | `preview_generator.py` |
| **主题** | tech（科技风） | minimal（简约风） | business（商务风） |
| **文件数量** | 1篇 | 10篇 | 1篇（持续编辑） |
| **转换时间** | ~0.4秒 | ~3.7秒（8线程并发） | 实时（<1秒） |
| **适用场景** | 技术文章、教程 | 博客、文章库 | 报告、专业内容 |
| **特色功能** | `--preview`自动打开浏览器 | `--workers`并发加速 | 文件监听+HTTP服务器 |
| **输出位置** | 指定路径 | 统一输出目录 | 预览目录 |

## 最佳实践建议

### 1. 主题选择建议

- **tech（科技风）**: 适合技术文章、开发教程、AI/科技内容
  - 特点：蓝紫渐变，现代科技感，代码高亮专业
  - 示例：AI模型介绍、编程教程、技术解析

- **minimal（简约风）**: 适合通用文章、文学作品、简洁风格
  - 特点：黑白灰，极简设计，易读性强
  - 示例：生活随笔、读书笔记、产品介绍

- **business（商务风）**: 适合商业分析、企业内容、专业报告
  - 特点：深蓝金色，专业稳重，数据展示清晰
  - 示例：业绩报告、市场分析、商业计划

### 2. 工作流程建议

**方案A：先写后转（推荐用于成熟内容）**
1. 使用 `wechat-tech-writer` 完成文章写作
2. 使用 `markdown_to_html.py` 转换单篇文章
3. 使用 `--preview` 参数在浏览器检查效果
4. 复制到微信公众号编辑器发布

**方案B：边写边看（推荐用于格式要求高的内容）**
1. 启动 `preview_generator.py` 实时预览服务
2. 在Markdown编辑器中写作
3. 保存后刷新浏览器查看效果
4. 重复直到满意
5. 复制到微信公众号编辑器发布

**方案C：批量处理（推荐用于历史文章整理）**
1. 将多篇Markdown文章放在同一目录
2. 使用 `batch_convert.py` 批量转换
3. 逐一在浏览器中检查效果
4. 复制到微信公众号编辑器批量发布

### 3. 性能优化建议

- **单篇文章**: 直接使用 `markdown_to_html.py`，速度最快
- **少量文章（<5篇）**: 使用 `batch_convert.py --workers 4`
- **大量文章（≥10篇）**: 使用 `batch_convert.py --workers 8` 或更高
- **实时编辑**: 使用 `preview_generator.py`，文件变化后<1秒完成转换

### 4. 常见问题处理

**问题1：粘贴到微信编辑器后样式丢失**
- 原因：微信编辑器会过滤部分CSS属性
- 解决：使用内联样式（本工具已自动处理）

**问题2：代码块显示不正常**
- 原因：微信不支持JavaScript语法高亮
- 解决：使用CSS实现的静态语法高亮（本工具已实现）

**问题3：图片无法显示**
- 原因：微信不支持本地图片路径
- 解决：在微信编辑器中重新上传图片，或使用图床URL

**问题4：表格在手机上显示异常**
- 原因：表格过宽超出屏幕
- 解决：使用响应式表格样式（本工具已实现），或减少列数

---

## 更多资源

- **SKILL.md**: 完整使用指南和快速参考
- **references/**: 详细的技术文档和最佳实践
- **templates/**: 三套CSS主题模板（可自定义）

## 反馈与改进

如果你在使用过程中遇到问题或有改进建议，欢迎：
1. 查看 `references/` 目录下的详细文档
2. 修改 `templates/` 目录下的CSS主题文件以自定义样式
3. 参考本文档中的最佳实践建议
