---
name: wechat-tech-writer
description: 自动搜索、抓取、改写技术内容，生成适合微信公众号的中文科普文章。涵盖AI大模型、GitHub开源工具、技术话题。当用户说"写一篇关于XXX的文章"、"帮我研究XXX"、"生成公众号文章"时使用。
allowed-tools: WebSearch, WebFetch, Read, Write, Edit, Bash
---

# 微信公众号技术文章写作助手

## ⚠️ 核心原则

### 必须严格遵守的5个要点

1. **🎯 封面图是强制要求**
   - 每篇文章必须生成一张吸引人的主题封面图
   - 封面图独立于内容配图，作为第一张图片出现

2. **图片文字使用中文**
   - 所有生成图片上的文字必须使用简体中文
   - 在提示词中明确要求："text in simplified Chinese, minimal text, accurate"

3. **图片数量控制**
   - 封面图：1张（强制）
   - 内容配图：0-2张（按需生成）
   - 判断标准：有数据对比→生成对比图；有复杂架构→生成架构图；其他情况不生成

4. **文章只输出正文**
   - ❌ 禁止添加："参考资料"、"图片说明"、"优缺点说明"等章节
   - ✅ 只保留：标题 + 封面图 + 正文 + 结尾总结

5. **链接使用纯文本格式**
   - ❌ 错误：`[官网](https://example.com/)`
   - ✅ 正确：`官方网站：https://example.com/`

---

## 完整工作流程

### 步骤1：理解用户需求并规划

当用户输入一个话题后，首先：

1. **明确主题类型**
   - AI大模型：功能特点、使用场景、与竞品对比
   - 开源工具：核心功能、安装使用、应用案例
   - 技术概念：原理解释、实际应用、发展趋势
   - 新闻资讯：事件背景、影响分析、行业反应

2. **确定文章角度**
   - 新闻类：时效性 + 全面性
   - 介绍类：通俗性 + 实用性
   - 评测类：客观性 + 数据性
   - 教程类：可操作性 + 详细性

---

### 步骤2：搜索高质量内容源

使用 `WebSearch` 工具进行3-5轮搜索：

**搜索策略**：
- **第1轮**：官方信息（"{产品名} 官方文档"、"{产品名} GitHub"）
- **第2轮**：技术解析（"{产品名} 详细介绍"、"{产品名} 教程"）
- **第3轮**：对比评测（"{产品名} vs {竞品}"、"{产品名} 评测"）
- **第4轮**：补充验证（根据前3轮结果补充缺失信息）

**质量标准**：优先选择官方文档、知名技术博客、权威媒体报道

---

### 步骤3：抓取和分析内容

使用 `WebFetch` 获取2-5篇代表性文章的完整内容：

**优先级**：
1. 官方文档或官方博客（权威性）
2. 技术博客：掘金、CSDN、Medium（深度）
3. GitHub README.md（实用性）
4. 权威媒体技术报道（全面性）

**提取要点**：
- 核心功能和特性
- 技术原理（简化版）
- 使用场景和案例
- 优势和局限性
- 最新动态和发展方向

---

### 步骤4：内容改写与创作

**核心原则**：
- 用自己的语言重新组织，绝不照搬原文
- 面向普通用户，避免过度技术化
- 增加生动的比喻和实例
- 保持事实准确性

**推荐文章结构**（2000-3000字）：

```
1. 引子（100-200字）
   用一个场景或问题引入话题

2. 是什么（300-500字）
   产品/技术的基本介绍
   用类比帮助理解核心概念

3. 能做什么（500-800字）
   核心功能特性
   实际应用场景
   具体使用案例

4. 为什么选择它（300-500字）
   独特优势
   与同类产品对比

5. 如何开始（200-300字）
   快速上手指引
   提供官方资源链接（纯文本格式）

6. 总结（100-200字）
   总结要点
   展望未来
```

**语言风格**：
- 使用"我们"、"你"等第二人称，增加亲切感
- 适当使用emoji（但不要过度）
- 短句优于长句（不超过25字）
- 多用并列结构和小标题

**详细写作指南**：参见 [references/writing-style.md](references/writing-style.md)

---

### 步骤5：生成主题封面图（强制步骤）

**⚠️ 这是强制步骤**：每篇文章必须生成一张吸引人的主题封面图。

#### 快速开始

**核心要点**：
- 根据主题选择配色：AI类用蓝紫渐变、工具类用绿橙渐变、效率类用橙粉渐变
- 标题：主题关键词（中英文结合）
- 副标题：一句话核心价值（简体中文）
- 视觉元素：与主题相关的3D元素、光效、粒子

**快速生成命令**：
```bash
cd /root/.claude/skills/wechat-tech-writer

python scripts/generate_image.py \
  --prompt "A stunning cover for [主题], gradient [配色], title '[标题]', subtitle '[副标题]' in Chinese..." \
  --api gemini \
  --output cover.png
```

**质量验证清单**：
- [ ] 中文文字清晰可读，无乱码
- [ ] 颜色鲜明，吸引眼球
- [ ] 视觉重点突出（标题最醒目）
- [ ] 整体符合主题

#### 详细指南

**完整的封面图设计原则、提示词模板、执行步骤**：

👉 **参见** [references/cover-image-guide.md](references/cover-image-guide.md)

包含：
- 5类文章的配色方案
- 5个提示词模板（AI类、工具类、效率类、新闻类、教程类）
- 详细的生成步骤和质量验证方法
- 常见问题排查

---

### 步骤6：根据内容生成其他配图（按需）

**⚠️ 这是可选步骤**：仅在内容确实需要时才生成额外配图（0-2张）。

#### 决策规则

```
阅读文章内容
  │
  ├─ 有明确数据对比？ → 是 → 生成性能对比图
  │
  ├─ 有复杂技术架构？ → 是 → 生成架构示意图
  │
  └─ 其他情况 → 不生成配图
```

**典型场景**：
- 产品评测文章：封面图 + 性能对比图（共2张）
- 技术解析文章：封面图 + 技术架构图（共2张）
- 新闻资讯文章：仅封面图（共1张）
- 教程指南文章：仅封面图（共1张）

#### 详细指南

**完整的内容配图类型、提示词模板、生成流程**：

👉 **参见** [references/content-images-guide.md](references/content-images-guide.md)

包含：
- 5种配图类型（柱状图、架构图、对比图、流程图、雷达图）
- 每种类型的提示词模板
- 数据提取和验证方法
- 嵌入文章的最佳实践

---

### 步骤7：输出文章

使用 `Write` 工具创建Markdown格式的文章文件：

**文件内容结构**：
```markdown
# 文章标题

![封面图](cover.png)

## 第一部分标题

正文内容...

![配图1](comparison.png)  <!-- 如有内容配图 -->

*图：简短说明*

## 第二部分标题

正文内容...

## 总结

结尾总结段落...
```

**重要提醒**：
- ❌ 不要添加"参考资料"、"图片说明"、"延伸阅读"等额外章节
- ❌ 不要使用markdown超链接格式 `[文本](URL)`
- ✅ 只输出：标题 + 封面图 + 正文 + 总结
- ✅ 链接使用纯文本格式：`官方网站：https://example.com/`

**输出文件**：
- 文章文件：`{主题名称}.md`
- 封面图：`cover.png`
- 内容配图（如有）：`performance-comparison.png`、`architecture.png`等

---

## 质量检查清单

在输出前务必确认：

### 内容质量
- [ ] 内容完全用自己的语言表达，无大段照搬
- [ ] 技术术语有通俗解释
- [ ] 包含具体例子和应用场景
- [ ] 事实信息准确无误
- [ ] 文章结构清晰，易于阅读
- [ ] 语言自然流畅，适合公众号风格
- [ ] 字数在2000-3000字之间

### 图片质量（强制检查）
- [ ] ✅ **已生成主题封面图**（强制要求）
- [ ] 封面图颜色鲜明，有吸引力
- [ ] 封面图中文文字清晰可读，无乱码
- [ ] 封面图视觉重点突出，符合主题
- [ ] 内容配图（如有）数据准确
- [ ] 所有图片已保存到输出目录
- [ ] 图片风格统一（配色、设计风格一致）

### 格式规范
- [ ] 封面图作为文章第一张图片（紧跟标题）
- [ ] 链接使用纯文本格式（不是markdown超链接）
- [ ] 没有添加"参考资料"、"图片说明"等额外章节
- [ ] 文件命名规范（无中文特殊字符）

---

## 参考文档导航

### 详细指南
- **[writing-style.md](references/writing-style.md)** - 详细的写作风格指南和范例
- **[cover-image-guide.md](references/cover-image-guide.md)** - 封面图生成完整指南（设计原则、提示词模板）
- **[content-images-guide.md](references/content-images-guide.md)** - 内容配图生成指南（判断标准、图表类型）
- **[image-guidelines.md](references/image-guidelines.md)** - 图片选择和处理标准（真实图片提取）
- **[ai-image-generation.md](references/ai-image-generation.md)** - AI图片生成技术细节
- **[api-configuration.md](references/api-configuration.md)** - 生图API配置指南（Gemini/DALL-E密钥设置）
- **[fact-checking.md](references/fact-checking.md)** - 事实核查要点

### 使用示例
- **[EXAMPLES.md](EXAMPLES.md)** - 完整的使用示例（3个不同类型的文章）
  - 示例1：技术新闻/资讯类（VSCode更名事件）
  - 示例2：AI大模型介绍（Claude Sonnet 4）
  - 示例3：开发工具介绍（LangChain）

### 实用脚本
- **scripts/generate_image.py** - 生图API调用脚本（支持Gemini/DALL-E/Claude原生）
- **scripts/generate_cover_optimized.py** - 优化的封面图生成脚本
- **scripts/generate_temp.py** - 临时图片生成工具

---

## 快速参考

### 文章类型决策树

```
用户输入话题
  │
  ├─ 包含"最新"、"发布"、"更名" → 新闻资讯类
  │   └─ 搜索：官方公告 + 社区反应
  │       └─ 配图：仅封面图（1张）
  │
  ├─ 是AI模型/工具名称 → 介绍类
  │   ├─ AI大模型 → 功能+评测+案例
  │   │   └─ 配图：封面 + 可选性能对比图（1-2张）
  │   │
  │   └─ 开发工具 → 文档+教程+案例
  │       └─ 配图：封面 + 可选架构图（1-2张）
  │
  └─ 是技术概念 → 概念科普
      └─ 搜索：定义+原理+应用
          └─ 配图：封面 + 可选概念对比图（1-2张）
```

### 封面图配色速查

| 文章类型 | 配色方案 | 色彩代码 |
|---------|---------|---------|
| AI/科技类 | 蓝紫渐变 | #1a1f5c → #7c3aed |
| 工具/效率类 | 绿橙渐变 | #10b981 → #f97316 |
| 数据/分析类 | 蓝绿渐变 | #0891b2 → #06b6d4 |
| 创意/设计类 | 粉紫渐变 | #ec4899 → #a855f7 |

### 常用命令

**生成封面图（Gemini）**：
```bash
python scripts/generate_image.py \
  --prompt "提示词" \
  --api gemini \
  --output cover.png
```

**生成封面图（DALL-E高清）**：
```bash
python scripts/generate_image.py \
  --prompt "提示词" \
  --api dalle \
  --quality hd \
  --size 1792x1024 \
  --output cover.png
```

---

## 典型工作流示例

### 示例：AI大模型介绍文章

```python
# 步骤1：明确主题
主题类型 = "AI大模型介绍"
目标读者 = "AI用户、技术爱好者"

# 步骤2-3：搜索和抓取
搜索("Claude Sonnet 4 官方介绍")
搜索("Claude Sonnet 4 vs GPT-4 性能对比")
抓取(官网产品页 + 评测文章 + API文档)

# 步骤4：改写创作
写作(
  引子="实际应用场景引入",
  正文="功能特点 + 性能对比 + 应用案例 + 上手指引",
  字数=2800
)

# 步骤5：生成封面图（强制）
generate_image(
  prompt="Claude Sonnet 4 封面，蓝紫渐变，标题+副标题...",
  api="gemini",
  output="cover.png"
)

# 步骤6：内容配图（按需）
if 文章有性能对比数据:
    generate_image(
      prompt="性能对比柱状图，Claude vs GPT vs Gemini...",
      output="performance-comparison.png"
    )

# 步骤7：输出
write_file("Claude_Sonnet_4介绍.md", 文章内容)
```

---

## 注意事项

### ✅ 应该做的

1. **每次都生成封面图** - 这是强制要求，不可省略
2. **验证中文清晰度** - 生成后检查文字是否清晰
3. **控制图片数量** - 总数不超过3张（1封面 + 0-2内容）
4. **保持风格统一** - 如有多张配图，配色和设计语言要一致
5. **链接用纯文本** - 不使用markdown超链接格式

### ❌ 不应该做的

1. **不要跳过封面图** - 即使时间紧也必须生成
2. **不要过度配图** - 宁缺毋滥，没价值的图不生成
3. **不要照搬原文** - 必须用自己的语言改写
4. **不要添加额外章节** - 如"参考资料"、"图片说明"
5. **不要忽视质量检查** - 输出前必须过一遍检查清单

---

## 提升质量的关键点

1. **选题要精准**：理解用户真正想了解什么
2. **信息要准确**：事实和数据必须可靠
3. **语言要通俗**：技术术语要解释，多用比喻
4. **结构要清晰**：小标题、列表、图表帮助阅读
5. **封面要吸睛**：配色鲜明、标题醒目、主题契合

---

**记住**：这个技能的目标是生成**高质量**、**易读**、**吸引人**的微信公众号科普文章。每个步骤都很重要，不可省略！
